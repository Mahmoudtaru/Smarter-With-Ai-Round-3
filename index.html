<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุฑุณ Smarter With AI - ุงูุฏูุนุฉ ุงูุซุงูุซุฉ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Cairo -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.min.js"></script>
    
    <!-- React and ReactDOM (Updated to Cloudflare CDN for better stability) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- Babel for JSX transpilation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        // Set theme on initial load to prevent FOUC (Flash of Unstyled Content)
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark')
        } else {
          document.documentElement.classList.remove('dark')
        }
    </script>

    <style>
        :root {
            --bg-dark: #141c29;
            --primary-dark: #1e2d44;
            --accent-green: #92b43b;
            --accent-navy: #1e2d44;
            --text-light: #fbf9f4;
            --text-dark: #1e2d44;
            --bg-light: #fbf9f4;
            --primary-light: #ffffff;
        }

        body {
            font-family: 'Cairo', sans-serif;
            scroll-behavior: smooth;
            background-color: var(--bg-light);
        }
        
        .dark body {
            background-color: var(--bg-dark);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .animate-fadeIn { animation: fadeIn 1s ease-in-out forwards; }
        .animate-fadeInUp { animation: fadeInUp 0.8s ease-in-out forwards; }
        
        .tab-content-anim {
             animation: fadeInUp 0.5s ease-in-out;
        }

        @keyframes pulse-glow {
            0%, 100% {
                transform: scale(1.02);
                box-shadow: 0 0 8px var(--accent-green), 0 0 12px var(--accent-navy);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 16px var(--accent-green), 0 0 24px var(--accent-navy);
            }
        }
        .pulse-animate {
            animation: pulse-glow 2.2s infinite ease-in-out;
        }

        @keyframes blink-caret {
          from, to { border-color: transparent }
          50% { border-color: var(--accent-green); }
        }
        
        .typewriter-anim {
            overflow: hidden; white-space: nowrap; margin: 0 auto; letter-spacing: .05em;
            display: inline-block;
            vertical-align: top;
            animation: blink-caret .75s step-end infinite;
        }
        .typewriter-ltr { border-right: .15em solid var(--accent-green); }
        .typewriter-rtl { border-left: .15em solid var(--accent-green); }


        .video-container {
            position: relative; width: 100%; padding-bottom: 56.25%; /* 16:9 */
            height: 0; overflow: hidden; border-radius: 0.5rem;
        }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        .content-card {
            background-color: var(--primary-light);
            border-top: 4px solid var(--accent-navy);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .content-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(30, 45, 68, 0.1), 0 4px 6px -2px rgba(30, 45, 68, 0.05);
        }
        .dark .content-card {
            background-color: var(--primary-light);
            border-color: var(--accent-green);
            color: var(--text-dark);
        }
        .dark .content-card:hover {
             box-shadow: 0 10px 15px -3px rgba(146, 180, 59, 0.1), 0 4px 6px -2px rgba(146, 180, 59, 0.07);
        }

        .page-title {
            color: var(--accent-navy);
        }
        .dark .page-title {
            color: var(--accent-navy);
        }

        .section-header {
             color: var(--accent-navy);
        }
        .dark .section-header {
             color: var(--accent-green);
        }
        
        .subsection-title {
            background-color: var(--accent-green);
            color: var(--text-light);
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            margin-bottom: 0.75rem;
        }
        .dark .subsection-title {
            background-color: var(--accent-green);
            color: var(--accent-navy);
            font-weight: 700;
        }
        .subsection-title i {
            color: var(--text-light) !important;
        }
        .dark .subsection-title i {
            color: var(--accent-navy) !important;
        }
        
        .accordion-header[aria-expanded="true"] {
            background-color: rgba(146, 180, 59, 0.05);
        }
        .dark .accordion-header[aria-expanded="true"] {
             background-color: rgba(146, 180, 59, 0.1);
        }
        
        .bottom-nav-active { 
            color: #ffffff; 
            transform: scale(1.1); 
        }
        .bottom-nav-active > span { font-weight: 700; }

        input[type="checkbox"] {
            accent-color: var(--accent-green);
        }

        .nested-accordion {
            background-color: #ffffff;
            border: 1px solid #e9ecef;
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            margin-bottom: 0.75rem;
            overflow: hidden;
        }
        .nested-accordion-header {
            background-color: #f8f9fa;
            padding: 0.75rem 1rem;
            font-weight: 600;
            color: var(--accent-navy);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e9ecef;
        }
        .nested-accordion-header[aria-expanded="true"] {
             background-color: #f1f3f5;
        }

        .nested-accordion-content {
             max-height: 0;
             overflow: hidden;
             transition: max-height 0.3s ease-out;
             background-color: #ffffff;
             padding: 0;
        }
        .nested-accordion-content-inner {
            padding: 1rem;
        }

        /* Brand Button Styles */
        .btn-brand-primary {
            background-color: var(--accent-green);
            color: white;
            transition: all 0.3s ease;
        }
        .btn-brand-primary:hover {
            background-color: #7a9632;
            transform: translateY(-2px);
        }
        
        .btn-brand-navy {
            background-color: var(--accent-navy);
            color: white;
            transition: all 0.3s ease;
        }
        .btn-brand-navy:hover {
            background-color: #152030;
            transform: translateY(-2px);
        }
        
        /* New Gradient Action Button Style */
        .btn-action-gradient {
            background: linear-gradient(to right, var(--accent-green), var(--accent-navy));
            color: white;
            transition: all 0.3s ease;
        }
        .btn-action-gradient:hover {
            opacity: 0.9;
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

    </style>
</head>
<body class="bg-bg-light dark:bg-bg-dark text-text-dark dark:text-text-light transition-colors duration-300">
    
    <div id="welcome-screen" class="fixed inset-0 bg-[#1e2d44] flex flex-col justify-center items-center z-50 transition-opacity duration-700">
        <div class="w-full flex flex-col items-center text-center">
            <img src="https://i.postimg.cc/Wb58HwSp/Smarter-With-Ai-Round-3.png" alt="Smarter With AI Logo" class="w-32 h-32 mx-auto mb-6 rounded-full bg-white p-2 shadow-lg animate-fadeIn" style="animation-delay: 0.5s;">
            <h1 id="welcome-title" dir="ltr" class="text-4xl sm:text-5xl font-bold text-[--text-light] mb-4 min-h-[56px] sm:min-h-[60px]"></h1>
            <p id="welcome-subtitle" class="text-lg sm:text-xl text-[--accent-green] mt-2 min-h-[40px] sm:min-h-[44px]"></p>
            <button id="start-btn" class="mt-12 bg-gradient-to-r from-[--accent-green] to-[--accent-navy] text-white font-bold py-3 px-10 rounded-lg text-xl transition-all transform opacity-0">
                ุงุจุฏุฃ ุงูุขู
            </button>
        </div>
    </div>

    <div id="root" class="hidden"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef, useMemo } = React;

        // Icon Component
        const Icon = ({ name, className }) => {
            const wrapperRef = useRef(null);

            useEffect(() => {
                if (wrapperRef.current && window.lucide) {
                    const i = document.createElement('i');
                    i.setAttribute('data-lucide', name);
                    
                    wrapperRef.current.innerHTML = ''; 
                    wrapperRef.current.appendChild(i);
                    
                    window.lucide.createIcons({ nodes: [i] });

                    const svg = wrapperRef.current.querySelector('svg');
                    if (svg && className) {
                        className.split(' ').forEach(cls => {
                            if (cls) svg.classList.add(cls);
                        });
                    }
                }
            }, [name, className]);

            return <span ref={wrapperRef} className="inline-block" />;
        };

        // Reminder Component
        const Reminder = ({ children }) => {
            return (
                <div className="mb-6 p-4 border-r-4 border-[--accent-green] bg-green-50 dark:bg-slate-800 rounded-lg shadow-md flex items-start gap-4">
                    <Icon name="brain-circuit" className="w-8 h-8 text-[--accent-green] flex-shrink-0 mt-1" />
                    <div>
                        <h3 className="text-lg font-bold text-[--accent-green] mb-1">ุฑุณุงูุฉ ูู ูุณุงุนุฏู ุงูุฐูู</h3>
                        <p className="text-gray-700 dark:text-gray-200 text-sm">{children}</p>
                    </div>
                </div>
            );
        };

        // GlobalProgressBar Component
        const GlobalProgressBar = ({ title, progress, completedCount, totalCount, icon }) => {
            return (
                <div className="content-card p-4 rounded-lg shadow-md">
                    <div className="flex justify-between items-center mb-2">
                        <h3 className="section-header text-lg font-bold flex items-center gap-2">
                            <Icon name={icon} />
                            <span>{title}</span>
                        </h3>
                        <span className="font-bold text-[--accent-green]">{Math.round(progress)}%</span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                        <div className="bg-[--accent-green] h-2.5 rounded-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                    </div>
                    <p className="text-sm text-gray-600 dark:text-gray-400 mt-2 text-center">
                        {`ุฃูููุช ${completedCount} ูู ${totalCount}`}
                    </p>
                </div>
            );
        };

        // Accordion Component
        const Accordion = ({ title, isOpen, onToggle, children, progress, isLocked }) => {
            const contentRef = useRef(null);
            const isComplete = progress === 100;

            return (
                <div className={`content-card rounded-lg overflow-hidden shadow-md ${isLocked ? 'opacity-60 bg-gray-50' : ''}`}>
                    <button
                        aria-expanded={isOpen}
                        className="accordion-header w-full text-right p-5 flex flex-col text-lg sm:text-xl font-semibold hover:bg-gray-100 dark:hover:bg-gray-100 focus:outline-none"
                        onClick={onToggle}
                        disabled={isLocked}
                    >
                        <div className="flex justify-between items-center w-full">
                            <span className="flex items-center gap-2 text-right">
                                {isLocked ? (
                                    <Icon name="lock" className="text-gray-400" />
                                ) : (
                                    isComplete && <Icon name="check-circle-2" className="text-[--accent-green]" />
                                )}
                                {title}
                            </span>
                            <Icon name={isLocked ? "lock" : "chevron-down"} className={`transition-transform duration-300 ${isOpen ? 'rotate-180' : ''} ${isLocked ? 'text-gray-400' : ''}`} />
                        </div>
                        {!isLocked && progress !== undefined && progress > 0 && (
                             <div className="w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700 mt-3">
                                 <div className="bg-[--accent-green] h-1.5 rounded-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                             </div>
                        )}
                    </button>
                    <div
                        ref={contentRef}
                        className="accordion-content"
                        style={{ maxHeight: isOpen ? '5000px' : '0' }}
                    >
                        <div className="p-5 border-t border-gray-200 space-y-6">
                            {children}
                        </div>
                    </div>
                </div>
            );
        };

        // NestedAccordion Component
        const NestedAccordion = ({ title, icon, isOpen, onToggle, children }) => {
            const contentRef = useRef(null);

            useEffect(() => {
                if (isOpen && window.lucide) {
                     const timeoutId = setTimeout(() => window.lucide.createIcons(), 0);
                    return () => clearTimeout(timeoutId);
                }
            }, [isOpen]);

            return (
                <div className="nested-accordion">
                    <button
                        aria-expanded={isOpen}
                        className="nested-accordion-header w-full"
                        onClick={onToggle}
                    >
                        <span className="flex items-center gap-2">
                            <Icon name={icon} className="w-5 h-5 text-[--accent-green]" />
                            <span>{title}</span>
                        </span>
                        <Icon name="chevron-down" className={`transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} />
                    </button>
                    <div
                        ref={contentRef}
                        className="nested-accordion-content"
                        style={{ maxHeight: isOpen ? '5000px' : '0' }}
                    >
                        <div className="nested-accordion-content-inner text-gray-700 space-y-4">
                            {children}
                        </div>
                    </div>
                </div>
            );
        };

        // RecommendationLink Component
        const RecommendationLink = ({ href, icon, title, description }) => {
            return (
                <a 
                    href={href} 
                    target="_blank" 
                    rel="noopener noreferrer" 
                    className="flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10 transition-colors w-full border-b last:border-b-0"
                >
                    <Icon name={icon} className="w-5 h-5 text-[--accent-green] flex-shrink-0 mt-1" />
                    <div className="flex-grow">
                        <span className="font-semibold text-gray-800">{title}</span>
                        {description && <p className="text-sm text-gray-600">{description}</p>}
                    </div>
                    <Icon name="external-link" className="w-5 h-5 text-gray-400 flex-shrink-0 mt-1" />
                </a>
            );
        };

        // Header Component
        const Header = ({ theme, onThemeToggle }) => {
            return (
                <header className="bg-gradient-to-r from-[--accent-green] to-[--accent-navy] p-4 shadow-lg flex justify-between items-center sticky top-0 z-40">
                    <div className="text-center flex-grow">
                        <h1 className="text-2xl sm:text-3xl font-bold text-white tracking-wider" style={{ textShadow: '1px 1px 3px rgba(0,0,0,0.2)' }}>
                            Smarter With AI - Round 3
                        </h1>
                    </div>
                    <button id="theme-toggle" onClick={onThemeToggle} className="p-2 rounded-full text-white hover:bg-white/20 transition-colors">
                        <Icon name={theme === 'dark' ? 'sun' : 'moon'} />
                    </button>
                </header>
            );
        };

        // BottomNav Component
        const NavButton = ({ tabId, icon, label, activeTab, onClick }) => {
            const isActive = activeTab === tabId;
            return (
                <button
                    onClick={() => onClick(tabId)}
                    className={`bottom-tab-button flex flex-col items-center gap-1 text-white/70 hover:text-white w-full p-1 transition-all duration-200 ${isActive ? 'bottom-nav-active' : ''}`}
                >
                    <Icon name={icon} className="w-6 h-6" />
                    <span className="text-xs">{label}</span>
                </button>
            );
        };

        const BottomNav = ({ activeTab, onTabChange }) => {
            const navItems = [
                { tabId: 'home', icon: 'home', label: 'ุงูุฑุฆูุณูุฉ' },
                { tabId: 'lectures', icon: 'book-open', label: 'ุงููุญุงุถุฑุงุช' },
                { tabId: 'tasks', icon: 'clipboard-list', label: 'ุงูุชุงุณูุงุช' },
                { tabId: 'bonus', icon: 'gift', label: 'ุงูุจููุต' },
                { tabId: 'share', icon: 'heart-handshake', label: 'ุดุงุฑููุง' },
            ];

            return (
                <nav className="fixed bottom-0 inset-x-0 bg-gradient-to-r from-[--accent-green] to-[--accent-navy] flex justify-around p-2 z-50 shadow-t-lg">
                    {navItems.map(item => (
                        <NavButton
                            key={item.tabId}
                            tabId={item.tabId}
                            icon={item.icon}
                            label={item.label}
                            activeTab={activeTab}
                            onClick={onTabChange}
                        />
                    ))}
                </nav>
            );
        };

        // HomeTab Component
        const HomeTab = () => {
            const [isInstallAccordionOpen, setInstallAccordionOpen] = useState(false);
            
            useEffect(() => {
                if (isInstallAccordionOpen && window.lucide) {
                     const timeoutId = setTimeout(() => window.lucide.createIcons(), 0);
                    return () => clearTimeout(timeoutId);
                }
            }, [isInstallAccordionOpen]);

            return (
                <div className="space-y-6">
                    <Reminder>
                        ูุตูุญุฉ ูุงูุฉ: ุงูุงุณุชูุงุฏุฉ ุงูุญููููุฉ ูู ูุฐุง ุงูููุฑุณ ุชููู ูู ุงูุชุทุจูู ุงูุนููู. ูู ูุญุงุถุฑุฉ ูู ุฏุนูุฉ ูู ูุชุฌุฑุจุฉ ุงูุฃุฏูุงุช ุจููุณู ูุฑุคูุฉ ุงููุชุงุฆุฌ. ุงุณุชูุชุน ุจุงูุฑุญูุฉ!
                    </Reminder>
                    <div className="content-card p-6 rounded-lg shadow-md">
                        <h3 className="page-title text-2xl sm:text-3xl font-bold mb-4 text-center">ุฃููุงู ุจู ูู ููุฑุณ Smarter With AI - ุงูุฏูุนุฉ ุงูุซุงูุซุฉ!</h3>
                        <p className="text-center text-gray-700 dark:text-gray-700 mb-8">ูุณุนุฏูุง ุงูุถูุงูู ุฅูููุง ูู ูุฐู ุงูุฑุญูุฉ ุงูุดููุฉ ูุงุณุชูุดุงู ุนุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูููููุฉ ุงูุงุณุชูุงุฏุฉ ููู ูู ุญูุงุชู ุงูููููุฉ ูุงูููููุฉ.</p>
                        
                        {/* New Quick Links Section with Branded Buttons */}
                        <div className="mb-8 bg-gray-50 dark:bg-gray-100 p-4 rounded-xl border border-gray-200">
                             <h4 className="section-header text-xl font-bold mb-4 flex items-center justify-center gap-2">
                                <Icon name="link" />
                                <span>ุฑูุงุจุท ุงููุตูู ุงูุณุฑูุน</span>
                             </h4>
                             <div className="flex flex-col gap-3">
                                {/* Main Group Button - Green */}
                                <a href="https://t.me/+17hgx4yBQkZkNTFk" target="_blank" className="btn-brand-primary w-full py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-bold text-lg shadow-md">
                                    <Icon name="users" className="w-6 h-6" />
                                    <span>ุฌุฑูุจ ุงูููุฑุณ (ุงูููุงูุดุฉ ุงูุนุงูุฉ)</span>
                                </a>

                                {/* Secondary Buttons Grid - Navy */}
                                <div className="grid grid-cols-2 gap-3">
                                    <a href="https://t.me/c/3692158422/6" target="_blank" className="btn-brand-navy py-3 px-2 rounded-lg flex items-center justify-center gap-2 font-semibold text-sm sm:text-base shadow-sm">
                                        <Icon name="alert-circle" className="w-5 h-5" />
                                        <span>ุชุนูููุงุช ูุงูุฉ</span>
                                    </a>
                                     <a href="https://t.me/c/3692158422/1" target="_blank" className="btn-brand-navy py-3 px-2 rounded-lg flex items-center justify-center gap-2 font-semibold text-sm sm:text-base shadow-sm">
                                        <Icon name="help-circle" className="w-5 h-5" />
                                        <span>ุงูุฃุณุฆูุฉ ูุงูููุงุดุงุช</span>
                                    </a>
                                </div>
                                
                                <div className="grid grid-cols-3 gap-2">
                                    <a href="https://t.me/c/3692158422/5" target="_blank" className="btn-brand-navy py-2 px-1 rounded-lg flex flex-col items-center justify-center gap-1 text-xs sm:text-sm shadow-sm hover:opacity-90">
                                        <Icon name="book-open" className="w-5 h-5" />
                                        <span>ุงููุญุงุถุฑุงุช</span>
                                    </a>
                                    <a href="https://t.me/c/3692158422/2" target="_blank" className="btn-brand-navy py-2 px-1 rounded-lg flex flex-col items-center justify-center gap-1 text-xs sm:text-sm shadow-sm hover:opacity-90">
                                        <Icon name="clipboard-list" className="w-5 h-5" />
                                        <span>ุงูุชุงุณูุงุช</span>
                                    </a>
                                    <a href="https://t.me/c/3692158422/9" target="_blank" className="btn-brand-navy py-2 px-1 rounded-lg flex flex-col items-center justify-center gap-1 text-xs sm:text-sm shadow-sm hover:opacity-90">
                                        <Icon name="gift" className="w-5 h-5" />
                                        <span>ุงูุจููุต</span>
                                    </a>
                                </div>
                                
                                <p className="text-sm text-gray-500 mt-2 text-center font-bold">
                                    ๐ ูู ููุงุฉ ูููุง ุฑุณุงูุฉ ููุซุจุชุฉ ุจุงููุญุชูู ุงููุงููุ ูุจุชุชุญุฏูุซ ุจุงุณุชูุฑุงุฑ.
                                </p>
                             </div>
                        </div>

                        <div className="video-container shadow-lg mb-8">
                            <iframe src="https://www.youtube.com/embed/1TWllndZuFI?si=EWBxDPpfB4UEDVIN" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen title="ููุฏูู ุชุนุฑููู ุจูุธุงู ุงูููุฑุณ"></iframe>
                        </div>

                        <div className="grid md:grid-cols-2 gap-6 mb-6">
                           <div className="bg-white dark:bg-white p-5 rounded-xl shadow-lg transition-all hover:shadow-xl border-2 border-[--accent-green]">
                               <h4 className="section-header text-xl font-bold mb-4 flex items-center gap-2"><Icon name="info" /><span>ูุธุงู ุงูููุฑุณ</span></h4>
                                <ul className="space-y-3 text-gray-700">
                                    <li className="flex items-start gap-3"><Icon name="check-circle-2" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span>9 ุฃุณุงุจูุน ูู ุงูุชุนูู ุงููุฑูุฒ ูุงูููุซู.</span></li>
                                    <li className="flex items-start gap-3"><Icon name="check-circle-2" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span>ูุญุชูู ุฃุณุจูุนู: ููุฏูููุงุชุ ุฃุฏูุฉุ ูุชุงุณูุงุช.</span></li>
                                    <li className="flex items-start gap-3"><Icon name="check-circle-2" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span>ุชุนูู ูุนุงู ุจุฃุญุฏุซ ุฃุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู.</span></li>
                                    <li className="flex items-start gap-3"><Icon name="check-circle-2" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span>ุฌุฑูุจ ุฏุนู ูุณูุดู ูุงูู ุฃุณุจูุนู ููููุงูุดุฉ.</span></li>
                                    <li className="flex items-start gap-3"><Icon name="check-circle-2" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span>ูุดุฑูุน ุชุฎุฑุฌ ููุงุฆู ูุชุทุจูู ูุง ุชุนููุชู.</span></li>
                                </ul>
                           </div>
                           <div className="bg-white dark:bg-white p-5 rounded-xl shadow-lg transition-all hover:shadow-xl border-2 border-[--accent-green]">
                                <h4 className="section-header text-xl font-bold mb-4 flex items-center gap-2"><Icon name="layout-grid" /><span>ุฃูุณุงู ุงูุชุทุจูู</span></h4>
                                <ul className="space-y-3 text-gray-700">
                                     <li className="flex items-start gap-3"><Icon name="arrow-left-circle" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span><span className="font-bold">ุงูุฑุฆูุณูุฉ:</span> ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูููุฑุณ ูุงูุฑูุงุจุท ุงููุงูุฉ.</span></li>
                                     <li className="flex items-start gap-3"><Icon name="arrow-left-circle" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span><span className="font-bold">ุงููุญุงุถุฑุงุช:</span> ุฌููุน ูุญุงุถุฑุงุช ูุฃุฏูุฉ ุงูููุฑุณ.</span></li>
                                     <li className="flex items-start gap-3"><Icon name="arrow-left-circle" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span><span className="font-bold">ุงูุชุงุณูุงุช:</span> ุงูููุงู ุงูุนูููุฉ ุงูุฃุณุจูุนูุฉ.</span></li>
                                     <li className="flex items-start gap-3"><Icon name="arrow-left-circle" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span><span className="font-bold">ุงูุจููุต:</span> ุจูู ุฃุฏูุงุช ููุตุงุฏุฑ ุฅุถุงููุฉ.</span></li>
                                     <li className="flex items-start gap-3"><Icon name="arrow-left-circle" className="w-5 h-5 text-[--accent-green] mt-1 flex-shrink-0" /><span><span className="font-bold">ุดุงุฑููุง:</span> ูุฏุนููุง ููุดุงุฑูุฉ ุฑุฃูู.</span></li>
                                </ul>
                           </div>
                        </div>

                        <Accordion
                            title="ุทุฑููุฉ ุชุซุจูุช ุงูุชุทุจูู"
                            isOpen={isInstallAccordionOpen}
                            onToggle={() => setInstallAccordionOpen(!isInstallAccordionOpen)}
                        >
                            <div className="space-y-4 text-gray-700">
                                <div>
                                    <h5 className="font-bold text-lg mb-2 text-[--accent-green] flex items-center gap-2">
                                        <Icon name="smartphone" />
                                        <span>ุนูู ุงูููุจุงูู</span>
                                    </h5>
                                    <ul className="space-y-2 list-disc list-inside pr-4">
                                        <li>ุงุถุบุท ุนูู ุงูุซูุงุซ ููุงุท (ุฃู ุฒุฑ ุงููุดุงุฑูุฉ) ูู ุงููุชุตูุญ.</li>
                                        <li>ุงุฎุชุฑ "ุฅุถุงูุฉ ุฅูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ" (Add to Home Screen).</li>
                                        <li>ุฃุฏุฎู ุงุณู ุงูุชุทุจูู ุซู ุงุถุบุท "ุฅุถุงูุฉ" (Add).</li>
                                    </ul>
                                </div>
                                <div className="border-t pt-4">
                                    <h5 className="font-bold text-lg mb-2 text-[--accent-green] flex items-center gap-2">
                                        <Icon name="laptop" />
                                        <span>ุนูู ุงููุงุจุชูุจ</span>
                                    </h5>
                                    <ul className="space-y-2 list-disc list-inside pr-4">
                                        <li>ุงุถุบุท ุนูู ุงููุฌูุฉ (โ) ูู ุดุฑูุท ุงูุนููุงู.</li>
                                        <li>ุงุฎุชุฑ "Add Bookmark" ุฃู "ุฅุถุงูุฉ ุฅุดุงุฑุฉ ูุฑุฌุนูุฉ".</li>
                                    </ul>
                                </div>
                            </div>
                        </Accordion>

                    </div>
                </div>
            );
        };

        // LecturesTab Component
        const lecturesData = [
            { 
                title: "ุงูุฃุณุจูุน 1: ููุฏูุฉ ุนู ุงูุฐูุงุก ุงูุงุตุทูุงุนู", 
                lectures: [
                    { title: "ูุญุงุถุฑุฉ ุงูุฃุณุจูุน ุงูุฃูู", url: "https://t.me/c/3692158422/5/68" }
                ],
                guides: [
                    { title: "ูุฑููุงุช ุงูุงุณุจูุน ุงูุฃูู", url: "https://drive.google.com/drive/folders/1WOWEwC2iQgb69Vy3_3rN_gZ6fq5YB1jH?usp=sharing" }
                ]
            },
            { 
                title: "ุงูุฃุณุจูุน 2: ุงูุชุนูู ูุงูุจุญุซ", 
                lectures: [
                    { title: "ูุญุงุถุฑุฉ ุงูุฃุณุจูุน ุงูุซุงูู", url: "https://t.me/c/3692158422/5/103" }
                ],
                guides: [
                    { title: "ูุฑููุงุช ุงูุงุณุจูุน ุงูุซุงูู", url: "https://drive.google.com/drive/folders/1J3jjNGn0ZWVPrd6Zpsp9eEY_Qsb1dHn_?usp=sharing" }
                ]
            },
            { 
                title: "ุงูุฃุณุจูุน 3: ุฅูุดุงุก ุตูุฑ ุงุญุชุฑุงููุฉ", 
                lectures: [], 
                guides: []
            },
            { 
                title: "ุงูุฃุณุจูุน 4: ุฅูุดุงุก ููุฏูููุงุช ุงุญุชุฑุงููุฉ", 
                lectures: [], 
                guides: []
            },
            { 
                title: "ุงูุฃุณุจูุน 5: ุฅูุดุงุก ูุญุชูู ุตูุชู", 
                lectures: [], 
                guides: []
            },
            { 
                title: "ุงูุฃุณุจูุน 6: ุชุตููู ุงูููุงูุน ูุงูุชุทุจููุงุช", 
                lectures: [], 
                guides: []
            },
            { 
                title: "ุงูุฃุณุจูุน 7: ุงููุณุงุนุฏ ุงูุดุฎุตู", 
                lectures: [], 
                guides: [] 
            },
            { 
                title: "ุงูุฃุณุจูุน 8: ูุดุงุฑูุน ุนูููุฉ", 
                lectures: [], 
                guides: [] 
            },
            { 
                title: "ุงูุฃุณุจูุน 9: ูุดุฑูุน ุงูุชุฎุฑุฌ", 
                lectures: [], 
                guides: [] 
            },
        ];

        const LECTURE_COMPLETION_KEY = 'lectureCompletionStatusR3';
        const LecturesTab = ({ setModalMessage }) => {
            const CURRENT_WEEK_INDEX = 1; // Week 2 unlocked
            const [openWeek, setOpenWeek] = useState(lecturesData[CURRENT_WEEK_INDEX]?.title || null);
            const [isAvailabilityOpen, setAvailabilityOpen] = useState(false);
            const [completedLectures, setCompletedLectures] = useState(() => {
                try {
                    const saved = localStorage.getItem(LECTURE_COMPLETION_KEY);
                    return saved ? JSON.parse(saved) : {};
                } catch (error) {
                    console.error("Failed to parse lecture completion status from localStorage", error);
                    return {};
                }
            });

            useEffect(() => {
                localStorage.setItem(LECTURE_COMPLETION_KEY, JSON.stringify(completedLectures));
            }, [completedLectures]);
            
            useEffect(() => {
                if (window.lucide) {
                    const timeoutId = setTimeout(() => window.lucide.createIcons(), 0);
                    return () => clearTimeout(timeoutId);
                }
            }, [openWeek, completedLectures, isAvailabilityOpen]);

            const handleToggleWeek = (title) => {
                setOpenWeek(prev => (prev === title ? null : title));
            };

            const handleToggleLecture = (lectureKey) => {
                setCompletedLectures(prev => ({
                    ...prev,
                    [lectureKey]: !prev[lectureKey]
                }));
            };
            
            let total = 0;
            let completed = 0;
            lecturesData.forEach(week => {
                if (week.lectures) {
                    total += week.lectures.length;
                    week.lectures.forEach(lecture => {
                        if (completedLectures[`${week.title}-${lecture.title}`]) {
                            completed++;
                        }
                    });
                }
            });
            const totalLecturesCount = total;
            const totalCompletedLectures = completed;
            const overallProgress = totalLecturesCount > 0 ? (totalCompletedLectures / totalLecturesCount) * 100 : 0;

            const reminderText = "ุชุฐููุฑ: ููุชูู ุฃุณุจูุนููุง ูู ุจุซ ูุจุงุดุฑ (Live) ููู ุงูุฌูุนุฉ ุงูุณุงุนุฉ 8 ูุณุงุกู ููููุงูุดุฉ ูุงูุชุทุจูู. ูุง ุชููู ุฅุฐุง ูุงุชูุ ูุงูุชุณุฌูู ุณูููู ูุชุงุญูุง ููู ุงูุณุจุช ุจุฅุฐู ุงููู.";

            return (
                <div className="space-y-6">
                    <Reminder>{reminderText}</Reminder>
                    
                     <GlobalProgressBar 
                        title="ุฅุฌูุงูู ุชูุฏู ุงููุญุงุถุฑุงุช"
                        progress={overallProgress}
                        completedCount={totalCompletedLectures}
                        totalCount={totalLecturesCount}
                        icon="book-open-check"
                    />

                    {/* Channel Button - New Gradient Style */}
                    <div className="text-center">
                         <a 
                            href="https://t.me/c/3692158422/5" 
                            target="_blank"
                            className="btn-action-gradient hover:opacity-90 font-medium rounded-lg text-lg px-8 py-3 text-center transition-transform transform hover:scale-105 inline-flex items-center justify-center gap-2 shadow-md"
                        >
                            <Icon name="book-open" className="w-5 h-5"/>
                            <span>ุงูุฐูุงุจ ุฅูู ููุงุฉ ุงููุญุงุถุฑุงุช (ุชููุฌุฑุงู)</span>
                        </a>
                    </div>

                    {/* New Notebook & Assistant Buttons */}
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4 mb-6">
                        <a href="https://notebooklm.google.com/notebook/7b7f75b1-77f6-4363-ada6-84c730d6bfc7" target="_blank" className="btn-brand-navy py-3 px-4 rounded-lg flex items-center justify-center gap-2 shadow-sm hover:opacity-90 transition-all">
                            <Icon name="book" className="w-5 h-5 text-[--accent-green]" />
                            <span>Smarter Notebook (ููุช ุจูู ุงูููุฑุณ)</span>
                        </a>
                        <a href="https://gemini.google.com/gem/1iO5UkN9OqLiCY1TaRgP01ZN0qRbV4n0C?usp=sharing" target="_blank" className="btn-brand-navy py-3 px-4 rounded-lg flex items-center justify-center gap-2 shadow-sm hover:opacity-90 transition-all">
                            <Icon name="bot" className="w-5 h-5 text-[--accent-green]" />
                            <span>Smarter Assistant (ุงููุณุงุนุฏ ุงูุฎุงุต)</span>
                        </a>
                    </div>

                    <div className="space-y-4">
                        {lecturesData.map((week, index) => {
                            const isLocked = index > CURRENT_WEEK_INDEX;
                            const totalLectures = week.lectures?.length || 0;
                            const completedCount = week.lectures?.filter(l => completedLectures[`${week.title}-${l.title}`]).length || 0;
                            const progress = totalLectures > 0 ? Math.round((completedCount / totalLectures) * 100) : 0;

                            return (
                                <Accordion
                                    key={week.title}
                                    title={week.title}
                                    isOpen={!isLocked && openWeek === week.title}
                                    onToggle={() => isLocked ? setModalMessage("ุณูุชู ุฅุถุงูุฉ ูุฐุง ุงูุฃุณุจูุน ูุฑูุจูุง ุจุฅุฐู ุงููู.") : handleToggleWeek(week.title)}
                                    progress={isLocked ? 0 : progress}
                                    isLocked={isLocked}
                                >
                                    {!isLocked ? (
                                        <div className="space-y-6">
                                            <div>
                                                <h4 className="subsection-title flex items-center gap-2"><Icon name="play-circle" /> ูุดุงูุฏุฉ ุงููุญุงุถุฑุงุช</h4>
                                                {week.lectures && week.lectures.length > 0 ? (
                                                    <ul className="space-y-2 mt-4">
                                                        {week.lectures.map((lecture, index) => {
                                                            const lectureKey = `${week.title}-${lecture.title}`;
                                                            const isCompleted = !!completedLectures[lectureKey];
                                                            return (
                                                                <li key={index} className="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10 transition-colors">
                                                                    <input
                                                                        type="checkbox"
                                                                        id={`lecture-${week.title.replace(/\s/g, '-')}-${index}`}
                                                                        checked={isCompleted}
                                                                        onChange={() => handleToggleLecture(lectureKey)}
                                                                        className="h-5 w-5 rounded border-gray-300 cursor-pointer flex-shrink-0"
                                                                    />
                                                                    <div className="flex-grow flex justify-between items-center flex-wrap gap-2">
                                                                        <label
                                                                            htmlFor={`lecture-${week.title.replace(/\s/g, '-')}-${index}`}
                                                                            className={`text-lg cursor-pointer ${isCompleted ? 'line-through text-gray-500' : ''}`}
                                                                        >
                                                                            {lecture.title}
                                                                        </label>
                                                                        <a
                                                                            href={lecture.url}
                                                                            target="_blank"
                                                                            rel="noopener noreferrer"
                                                                            className="bg-[--accent-navy] text-white text-sm px-4 py-2 rounded-lg flex items-center gap-2 hover:opacity-90 transition-all transform hover:scale-105 dark:bg-[--accent-green] dark:text-[--accent-navy] dark:font-semibold"
                                                                            aria-label={`Open lecture for ${lecture.title}`}
                                                                        >
                                                                            <Icon name="play-circle" className="w-4 h-4" />
                                                                            <span>ูุดุงูุฏุฉ</span>
                                                                        </a>
                                                                    </div>
                                                                </li>
                                                            );
                                                        })}
                                                    </ul>
                                                ) : (
                                                    <p className="text-gray-600 text-center p-4">ุงููุญุงุถุฑุงุช ุณุชููู ูุชุงุญุฉ ูุฑูุจุงู ุจุฅุฐู ุงููู.</p>
                                                )}
                                            </div>
                                            
                                            {!week.title.includes("ูุดุฑูุน ุงูุชุฎุฑุฌ") && (
                                                <div className="pt-6 border-t border-gray-200 dark:border-gray-700">
                                                    <h4 className="subsection-title flex items-center gap-2"><Icon name="book-text" /> ุฃุฏูุฉ ุงูุฃุณุจูุน</h4>
                                                    {week.guides && week.guides.length > 0 ? (
                                                        <ul className="space-y-2 mt-4">
                                                            {week.guides.map((guide, index) => (
                                                                <li key={index}>
                                                                    <a href={guide.url} target="_blank" rel="noopener noreferrer" className="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10 transition-colors w-full">
                                                                        <Icon name={guide.title.includes("ุฏุนูุฉ") ? "gift" : "file-text"} className="w-5 h-5 text-[--accent-green] flex-shrink-0" />
                                                                        <span className="flex-grow">{guide.title}</span>
                                                                        <Icon name="external-link" className="w-5 h-5 text-gray-400" />
                                                                    </a>
                                                                </li>
                                                            ))}
                                                        </ul>
                                                    ) : (
                                                        <p className="text-gray-600 text-center p-4">ุงูุฃุฏูุฉ ุณุชููู ูุชุงุญุฉ ูุฑูุจุงู ุจุฅุฐู ุงููู.</p>
                                                    )}
                                                </div>
                                            )}

                                        </div>
                                    ) : (
                                        <></>
                                    )}
                                </Accordion>
                            );
                        })}
                    </div>

                    {/* Lecture Availability Dropdown at the bottom */}
                    <Accordion
                        title="โณ ูุฏุฉ ุฅุชุงุญุฉ ุงููุญุงุถุฑุงุช โ ููู ุฌุฏูุง"
                        isOpen={isAvailabilityOpen}
                        onToggle={() => setAvailabilityOpen(!isAvailabilityOpen)}
                    >
                        <div className="text-gray-700 dark:text-gray-700 space-y-2 leading-relaxed">
                            <p>ุงููุญุงุถุฑุงุช ูุชุงุญุฉ ูููู ูููู ุฎูุงู ูุฏุฉ ุงูููุฑุณ + 3 ุดููุฑ ุจุนุฏู.</p>
                            <p className="font-bold text-red-500">ูููโฆ</p>
                            <p>
                                ุงููู ูุฎููุต <span className="font-bold text-[--accent-navy]">ูู ุงููุญุงุถุฑุงุช</span> + <span className="font-bold text-[--accent-navy]">ูู ุงูุชุงุณูุงุช</span> + <span className="font-bold text-[--accent-navy]">ูุดุฑูุน ุงูุชุฎุฑุฌ</span>
                                <br />
                                ุจูุถูู ูููุงุฉ ุฎุงุตุฉ ูููุง ูู ูุญุงุถุฑุงุช ุงูููุฑุณ ูุฏู ุงูุญูุงุฉ. ๐
                            </p>
                        </div>
                    </Accordion>
                </div>
            );
        };

        // TasksTab Component
        const tasksData = [
            { 
                title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 1", 
                deadline: "24 ููุงูุฑ", 
                tasks: [
                    "ูุญุงููุฉ ุงุณุชูุดุงู Chatgpt ู Gemini",
                    "ูุดุงุฑูุฉ ูุญุงุฏุซุฉ ูุงุญุฏุฉ (ุนูู ุงูุฃูู) ูุน ุงู ุญุฏ ูููู"
                ] 
            },
            { 
                title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 2", 
                deadline: "31 ููุงูุฑ 2026", 
                tasks: [
                    "ุนูู ุจุญุซ ุดุงูู ุนู ููุถูุน ุงูุช ููุชู ุจูู",
                    "ุนูู ููุช ุจูู ูุชูุงููุฉ ูุญุงุฌุฉ ุชุฎุต ุดุบูู ุงู ุฏุฑุงุณุชู ููุดุงุฑูุชูุง ูุนุงูุง",
                    "ุงุฎุชูุงุฑู: ุงูุดุงุก ุชุงุณู ุฏูุฑูุฉ ูุญุงุฌุฉ ุงูุช ููุชู ุจููุง"
                ] 
            },
            { title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 3", deadline: "ูุฑูุจุงู", tasks: [] },
            { title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 4", deadline: "ูุฑูุจุงู", tasks: [] },
            { title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 5", deadline: "ูุฑูุจุงู", tasks: [] },
            { title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 6", deadline: "ูุฑูุจุงู", tasks: [] },
            { title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 7", deadline: "ูุฑูุจุงู", tasks: [] },
            { title: "ุชุงุณูุงุช ุงูุฃุณุจูุน 8", deadline: "ูุฑูุจุงู", tasks: [] },
            { title: "ุงูุฃุณุจูุน 9: ูุดุฑูุน ุงูุชุฎุฑุฌ", deadline: "ูุฑูุจุงู", tasks: [], isFinal: true },
        ];

        const TASK_COMPLETION_KEY = 'taskCompletionStatusR3';

        const TaskCard = ({ item, completedTasks, onToggleTask }) => {
            const totalTasks = item.tasks.length;
            const completedCount = item.tasks.filter(task => completedTasks[`${item.title}-${task}`]).length;
            const progress = totalTasks > 0 ? (completedCount / totalTasks) * 100 : 0;
            const isHighlighted = progress === 100 || !!item.isFinal;

            return (
                <div 
                    className="content-card p-6 rounded-lg shadow-md transition-all"
                    style={isHighlighted ? { borderTopColor: 'var(--accent-green)' } : {}}
                >
                    <h3 className="subsection-title text-xl sm:text-2xl font-bold flex items-center gap-2">
                        <Icon name={progress === 100 ? 'check-circle' : (item.isFinal ? 'award' : 'list-checks')} />
                        <span>{item.title}</span>
                    </h3>
                    
                    {totalTasks > 0 && (
                         <div className="w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700 my-4">
                             <div className="bg-[--accent-green] h-2 rounded-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                         </div>
                    )}

                    {item.deadline && (
                        <div className="text-center mb-4 -mt-2">
                            <span className="font-bold text-red-600 text-lg flex items-center justify-center gap-2">
                                <Icon name="calendar-clock" />
                                {`ุงูุฏูุฏูุงูู: ${item.deadline}`}
                            </span>
                        </div>
                    )}

                    {item.tasks.length > 0 ? (
                        <ul className="space-y-4 pt-2">
                            {item.tasks.map((task, index) => {
                                const taskKey = `${item.title}-${task}`;
                                const isCompleted = !!completedTasks[taskKey];
                                return (
                                    <li key={index} className="flex items-center gap-3">
                                        <input
                                            type="checkbox"
                                            id={`task-${item.title}-${index}`}
                                            checked={isCompleted}
                                            onChange={() => onToggleTask(taskKey)}
                                            className="h-5 w-5 rounded border-gray-300 cursor-pointer"
                                        />
                                        <label 
                                            htmlFor={`task-${item.title}-${index}`}
                                            className={`flex-grow cursor-pointer ${isCompleted ? 'line-through text-gray-500' : ''} ${task.includes("ุถุฑูุฑู") ? 'font-semibold' : ''}`}
                                        >
                                           {task}
                                        </label>
                                    </li>
                                )
                            })}
                        </ul>
                    ) : (
                        <p className="text-gray-600 text-center p-4">ุงูุชุงุณูุงุช ุณุชููู ูุชุงุญุฉ ูุฑูุจุงู ุจุฅุฐู ุงููู.</p>
                    )}
                </div>
            );
        };

        const LockedTaskCard = ({ title, setModalMessage }) => {
            return (
                <button 
                    className="content-card p-6 rounded-lg shadow-md transition-all opacity-60 flex flex-col items-center justify-center text-center w-full hover:opacity-75"
                    onClick={() => setModalMessage("ุณูุชู ุฅุถุงูุฉ ูุฐุง ุงูุฃุณุจูุน ูุฑูุจูุง ุจุฅุฐู ุงููู.")}
                >
                    <Icon name="lock" className="w-12 h-12 text-gray-400 mb-4" />
                    <h3 className="subsection-title text-xl sm:text-2xl font-bold !bg-gray-400 !text-white flex items-center gap-2">
                        <span>{title}</span>
                    </h3>
                    <p className="text-gray-600 font-semibold">ูุบูู ุญุงูููุง</p>
                </button>
            );
        };

        const TasksTab = ({ setModalMessage }) => {
            const CURRENT_WEEK_INDEX = 1; // Week 2 unlocked
            const [completedTasks, setCompletedTasks] = useState(() => {
                try {
                    const saved = localStorage.getItem(TASK_COMPLETION_KEY);
                    return saved ? JSON.parse(saved) : {};
                } catch (error) {
                    console.error("Failed to parse task completion status from localStorage", error);
                    return {};
                }
            });

            useEffect(() => {
                localStorage.setItem(TASK_COMPLETION_KEY, JSON.stringify(completedTasks));
                 if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [completedTasks]);

            const handleToggleTask = (taskKey) => {
                setCompletedTasks(prev => ({
                    ...prev,
                    [taskKey]: !prev[taskKey]
                }));
            };

            const { totalTasksCount, totalCompletedTasks } = useMemo(() => {
                let total = 0;
                let completed = 0;
                tasksData.forEach(week => {
                    total += week.tasks.length;
                    week.tasks.forEach(task => {
                        if (completedTasks[`${week.title}-${task}`]) {
                            completed++;
                        }
                    });
                });
                return { totalTasksCount: total, totalCompletedTasks: completed };
            }, [completedTasks]);

            const overallProgress = totalTasksCount > 0 ? (totalCompletedTasks / totalTasksCount) * 100 : 0;

            const reminderText = "ุชุฐููุฑ ููู: ุฅูุฌุงุฒ ุงูุชุงุณูุงุช ูู ุฃุณุงุณ ุชุซุจูุช ุงููุนูููุฉ. ูู ูุงุฌูุช ุฃู ุชุญุฏูุ ูุง ุชุชุฑุฏุฏ ูู ุงูุชูุงุตู ูุนูุง ุนูู ุฌุฑูุจ ุงูุชููุฌุฑุงู ุฃู ุนุจุฑ ุฑุณุงูุฉ ุฎุงุตุฉ. ุฏุนููุง ูู ูุณุชูุฑ ุทูุงู ุงูุฃุณุจูุน! ๐";

            return (
                <div className="space-y-6">
                    <Reminder>{reminderText}</Reminder>
                    <GlobalProgressBar 
                        title="ุฅุฌูุงูู ุชูุฏู ุงูุชุงุณูุงุช"
                        progress={overallProgress}
                        completedCount={totalCompletedTasks}
                        totalCount={totalTasksCount}
                        icon="clipboard-check"
                    />
                    
                    {/* Active Channel Button - New Gradient Style */}
                    <div className="text-center">
                         <a 
                            href="https://t.me/c/3692158422/2" 
                            target="_blank" 
                            className="btn-action-gradient hover:opacity-90 font-medium rounded-lg text-lg px-8 py-3 text-center transition-transform transform hover:scale-105 inline-flex items-center justify-center gap-2 shadow-md"
                        >
                            <Icon name="send" className="w-5 h-5"/>
                            <span>ุฑุงุจุท ููุงุฉ ุงูุชุงุณูุงุช (ุชููุฌุฑุงู)</span>
                        </a>
                    </div>

                    {/* Smarter Gifts Button */}
                    <div className="text-center mt-4">
                         <a 
                            href="https://mahmoudtaru.github.io/Smarter-Gifts/" 
                            target="_blank" 
                            className="btn-brand-primary hover:opacity-90 font-medium rounded-lg text-lg px-8 py-3 text-center transition-transform transform hover:scale-105 inline-flex items-center justify-center gap-2 shadow-md"
                        >
                            <Icon name="gift" className="w-5 h-5"/>
                            <span>ูููุน ุงููุณุงุนุฏูู ุงูุดุฎุตููู (Smarter Gifts)</span>
                        </a>
                    </div>

                    <div className="space-y-4">
                        {tasksData.map((item, index) => (
                            index > CURRENT_WEEK_INDEX ? (
                                <LockedTaskCard key={index} title={item.title} setModalMessage={setModalMessage} />
                            ) : (
                                <TaskCard 
                                    key={index} 
                                    item={item} 
                                    completedTasks={completedTasks}
                                    onToggleTask={handleToggleTask}
                                />
                            )
                        ))}
                    </div>
                </div>
            );
        };

        // BonusTab Component
        const toolsData = [
            { 
                title: "ุงุณุชุฎุฏุงู ูููู", 
                icon: "star", 
                tools: [
                    { name: "ChatGPT", url: "https://chat.openai.com/" },
                    { name: "Gemini", url: "https://gemini.google.com/" },
                    { name: "Copilot", url: "https://copilot.microsoft.com/" },
                    { name: "Claude", url: "https://claude.ai/" },
                    { name: "Perplexity", url: "https://www.perplexity.ai/" },
                    { name: "NotebookLM", url: "https://notebooklm.google.com/" },
                    { name: "Canva", url: "https://www.canva.com/" }
                ] 
            },
            { 
                title: "ุจุฑููุจุช ุงุญุชุฑุงูู", 
                icon: "brain-circuit", 
                tools: [
                    { name: "GeneratePrompt.ai", url: "https://generateprompt.ai/" }, 
                    { name: "Image to Prompt", url: "https://imageprompt.org/image-to-prompt" },
                    { name: "Prompt Engineer (GPT)", url: "https://chatgpt.com/g/g-5XtVuRE8Y-prompt-engineer" }
                ] 
            },
            { 
                title: "ุตูุฑ", 
                icon: "image", 
                tools: [
                    { name: "LMArena.ai", url: "https://lmarena.ai/" },
                    { name: "Meta AI", url: "https://www.meta.ai/" },
                    { name: "Whisk", url: "https://labs.google/fx/tools/whisk?utm_source=substack&utm_medium=email" },
                    { name: "Lovart", url: "https://www.lovart.ai/home" },
                    { name: "Genspark", url: "https://www.genspark.ai/" },
                    { name: "Ideogram", url: "https://ideogram.ai/" }, 
                    { name: "Gemini", url: "https://gemini.google.com/" },
                    { name: "Copilot", url: "https://copilot.microsoft.com/" },
                    { name: "Flow", url: "https://labs.google/fx/tools/flow" }
                ] 
            },
            { 
                title: "ุฃูุงูุฑ ุฌุงูุฒุฉ ููุตูุฑ", 
                icon: "images", 
                tools: [
                    { name: "ChatGPT Image Art", url: "https://www.chatgptimage.art/" },
                    { name: "Banana Prompts", url: "https://www.bananaprompts.xyz/explore" },
                    { name: "Nano Banana Prompt", url: "https://nanobananaprompt.org/prompts/" }
                ] 
            },
            { 
                title: "ุตูุช", 
                icon: "audio-lines", 
                tools: [
                    { name: "ElevenLabs", url: "https://elevenlabs.io/" }, 
                    { name: "Google AI Studio", url: "https://aistudio.google.com/" }, 
                    { name: "Lahajati", url: "https://lahajati.ai/" }, 
                    { name: "Minimax", url: "https://www.minimax.io/audio" },
                    { name: "Vocloner", url: "https://vocloner.com/" },
                    { name: "Cartesia", url: "https://play.cartesia.ai/" }
                ] 
            },
            { 
                title: "ููุฏูู", 
                icon: "video", 
                tools: [
                    { name: "Meta AI", url: "https://www.meta.ai/" },
                    { name: "Wan", url: "https://create.wan.video/explore" },
                    { name: "Pixverse", url: "https://app.pixverse.ai/onboard" },
                    { name: "Runway", url: "https://runwayml.com/" },
                    { name: "Flow", url: "https://labs.google/fx/tools/flow/project/ce8fcb35-6af4-4e51-9971-32a76da8aeaf" },
                    { name: "Sora", url: "https://sora.com/explore" },
                    { name: "Kling", url: "https://app.klingai.com/global/video-to-lip/new" }
                ] 
            },
            { 
                title: "ุชุนูู ูุนุงู", 
                icon: "graduation-cap", 
                tools: [
                    { name: "NotebookLM", url: "https://notebooklm.google.com/" }, 
                    { name: "ChatGPT", url: "https://chat.openai.com/" }, 
                    { name: "Perplexity", url: "https://www.perplexity.ai/" },
                    { name: "Gemini", url: "https://gemini.google.com/app" }
                ] 
            },
            { 
                title: "ุจุฑูุฒูุชูุดู", 
                icon: "presentation", 
                tools: [
                    { name: "Gamma", url: "https://gamma.app/" }, 
                    { name: "Tome", url: "https://tome.app/" }, 
                    { name: "Beautiful.ai", url: "https://www.beautiful.ai/" },
                    { name: "z.ai", url: "https://chat.z.ai/" },
                    { name: "NotebookLM", url: "https://notebooklm.google.com/" }
                ] 
            },
            { 
                title: "ูููุงุก ุงูุฐูุงุก ุงูุงุตุทูุงุนู", 
                icon: "bot", 
                tools: [
                    { name: "Genspark", url: "https://www.genspark.com/" }, 
                    { name: "Skywork", url: "https://skywork.ai/home?invite_code=0091508aac59845e2326904b700d8115" }, 
                    { name: "Manus", url: "https://manus.im/invitation/G2VVLOLCC7RPZFM" }, 
                    { name: "z.ai", url: "https://chat.z.ai/" },
                    { name: "Kimi", url: "https://www.kimi.com/" }
                ] 
            },
            { 
                title: "ุฃุฏูุงุช ุฃุฎุฑู ูููุฏุฉ", 
                icon: "wrench", 
                tools: [
                    { name: "Youtube to Notebooklm", url: "https://chromewebstore.google.com/detail/kobncfkmjelbefaoohoblamnbackjggk?utm_source=item-share-cb" },
                    { name: "Compress PDF (iLovePDF)", url: "https://www.ilovepdf.com/compress_pdf" },
                    { name: "PDF to PPT (Canva)", url: "https://www.canva.com/features/pdf-to-ppt-converter/" },
                    { name: "Voice Enhancer (Auphonic)", url: "https://auphonic.com/accounts/login/" },
                    { name: "ุฅุฒุงูุฉ ุดุนุงุฑ Gemini ูู ุงูุตูุฑ", url: "https://banana.ovo.re/" }
                ] 
            }
        ];

        const ToolCard = ({ category, isOpen, onToggle }) => {
            return (
                 <div className="content-card rounded-lg overflow-hidden shadow-md">
                    <button
                        aria-expanded={isOpen}
                        className="accordion-header w-full text-right p-5 flex items-center justify-between text-lg sm:text-xl font-semibold hover:bg-gray-100 dark:hover:bg-gray-100 focus:outline-none"
                        onClick={onToggle}
                    >
                        <span className="flex items-center gap-3">
                            <Icon name={category.icon} />
                            <span>{category.title}</span>
                        </span>
                        <Icon name="chevron-down" className={`transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} />
                    </button>
                    <div
                        className="accordion-content"
                        style={{ maxHeight: isOpen ? '5000px' : '0' }}
                    >
                        <div className="p-5 border-t border-gray-200">
                            <ul className="list-disc list-inside space-y-2 pt-4 text-text-dark">
                                {category.tools.map((tool, index) => (
                                    <li key={index} className="hover:text-[--accent-green]">
                                        <a href={tool.url} target="_blank" rel="noopener noreferrer">{tool.name}</a>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        const BonusTab = () => {
            const [openAccordion, setOpenAccordion] = useState(null);
            const [openNestedAccordion, setNestedAccordion] = useState(null);
            const [openToolAccordion, setOpenToolAccordion] = useState(null);

            useEffect(() => {
              if (window.lucide) {
                const timeoutId = setTimeout(() => window.lucide.createIcons(), 0);
                return () => clearTimeout(timeoutId);
              }
            }, [openAccordion, openToolAccordion, openNestedAccordion]);

            const handleToggle = (title) => {
                setOpenAccordion(openAccordion === title ? null : title);
            };

            const handleNestedToggle = (title) => {
                setNestedAccordion(openNestedAccordion === title ? null : title);
            };

            const handleToolToggle = (title) => {
                setOpenToolAccordion(openToolAccordion === title ? null : title);
            };

            const reminderText = "ููุงุญุธุฉ ูุงูุฉ: ูุฐุง ุงููุณู ูุชุฌุฏุฏ ุจุงุณุชูุฑุงุฑ ููุถู ุชุฑุดูุญุงุช ูุฃูุถู ุงูุฃุฏูุงุช ูุงููุตุงุฏุฑ ุงูุชู ุฃุฑู ุฃููุง ุณุชุถูู ูููุฉ ุญููููุฉ ูููุงุฑุงุชู ูู ุงูุนูู ูุงูุฏุฑุงุณุฉ. ุชููุฏู ุฏุงุฆููุง ูุงูุชุดุงู ุงูุฌุฏูุฏ.";

            return (
                <div className="space-y-8">
                    <Reminder>{reminderText}</Reminder>
                    
                    {/* Channel Button - New Gradient Style */}
                    <div className="text-center">
                         <a 
                            href="https://t.me/c/3692158422/9" 
                            target="_blank"
                            className="btn-action-gradient hover:opacity-90 font-medium rounded-lg text-lg px-8 py-3 text-center transition-transform transform hover:scale-105 inline-flex items-center justify-center gap-2 shadow-md"
                        >
                            <Icon name="gift" className="w-5 h-5"/>
                            <span>ุงูุฐูุงุจ ุฅูู ููุงุฉ ุงูุจููุต (ุชููุฌุฑุงู)</span>
                        </a>
                    </div>

                    <div className="space-y-4">
                        <Accordion 
                            title="ุชุฑุดูุญุงุชู ุงูุฎุงุตุฉ" 
                            isOpen={openAccordion === "recommendations"} 
                            onToggle={() => handleToggle("recommendations")}
                        >
                            <NestedAccordion
                                title="ุงูุชุตููู (Canva) ูุงููููุชุงุฌ (Capcut)"
                                icon="video"
                                isOpen={openNestedAccordion === "design"}
                                onToggle={() => handleNestedToggle("design")}
                            >
                                <div className="flex flex-col rounded-lg overflow-hidden border">
                                    <RecommendationLink 
                                        href="https://t.me/HMcpa"
                                        icon="video"
                                        title="ูุดุงู ูุตุทูู ุฃูุงุฏููู (ููุฑุณุงุช ูุฏููุนุฉ)"
                                        description="ููุฒุฉ ุงูููุฑุณ: ุณุนุฑ ููููุ ุดุงููุ ุฌุฑูุจ ูุชุงุจุนุฉ ูููุฏุจุงู."
                                    />
                                    <div className="p-3 bg-gray-50 border-t">
                                        <span className="font-semibold flex items-center gap-2"><Icon name="youtube" className="w-5 h-5" /> ูู ุนุงูุฒ ุญุงุฌุฉ ูุฌุงููุฉ (ููุชููุจ):</span>
                                    </div>
                                    <RecommendationLink 
                                        href="https://youtube.com/playlist?list=PLsO4nF1GHw-NRT6LoFtGm_V57wjk_nncS&si=9Oh0TcO8ViTiJ2jC"
                                        icon="play-circle"
                                        title="ููุฑุณ ูุงููุง ูุฌุงูู ุนูู ุงูููุชููุจ"
                                    />
                                    <RecommendationLink 
                                        href="https://youtu.be/bSiemfHdFtI?si=QgHBFsJO52grQ_yE"
                                        icon="play-circle"
                                        title="Capcut ููุชููุจ (ููููุจููุชุฑ)"
                                    />
                                    <RecommendationLink 
                                        href="https://youtube.com/playlist?list=PLs-hceiryD_hjBCEDQMdCRPAhaR8Xemye&si=1NKlVSQ3DZp7kIys"
                                        icon="play-circle"
                                        title="Capcut ุนูู ุงููุงุชู"
                                    />
                                </div>
                            </NestedAccordion>

                            <NestedAccordion
                                title="ูุชุงุจุฉ ูุญุชูู (Content Writing)"
                                icon="book-copy"
                                isOpen={openNestedAccordion === "content"}
                                onToggle={() => handleNestedToggle("content")}
                            >
                                <div className="flex flex-col rounded-lg overflow-hidden border">
                                    <RecommendationLink 
                                        href="https://www.facebook.com/share/p/1EfMGRNcqa/"
                                        icon="book-copy"
                                        title="ุชุฑุดูุญุงุช ูุฌุงููุฉ ููุฏููุนุฉ"
                                        description="ุจูุณุช ุดุงูู ูุฃูุถู ูุตุงุฏุฑ ุชุนูู ูุชุงุจุฉ ุงููุญุชูู"
                                    />
                                    <div className="p-4 bg-green-50 border-t border-green-100">
                                        <h6 className="font-bold text-[--accent-green] mb-2 flex items-center gap-2">
                                            <Icon name="tag" className="w-4 h-4" />
                                            ุชูููู ุฎุงุต ูุฎุฑูุฌูู Smarter With AI:
                                        </h6>
                                        <p className="text-sm text-gray-700 mb-3 leading-relaxed">
                                            ูุชุงุญ ุญุงููุงู ุฎุตู <span className="font-bold">10%</span>.<br/>
                                            ุงุณุชุฎุฏู ุงูููุฏ ุงูุฎุงุต: <span className="font-mono font-bold bg-white px-2 py-0.5 rounded border border-gray-200 select-all">MH10</span><br/>
                                            <span className="text-xs text-gray-500">* ุงูููุฏ ูุชูุนูู ููุฏุฉ 3 ุดููุฑ ุนูู ุฌููุน ููุฑุณุงุช OnTrack.</span>
                                        </p>
                                        <a 
                                            href="https://www.facebook.com/ontrack610/" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            className="text-xs bg-[--accent-navy] text-white px-4 py-2 rounded-md inline-flex items-center gap-2 hover:opacity-90 transition-all hover:shadow-sm"
                                        >
                                            <span>ุฒูุงุฑุฉ ุตูุญุฉ OnTrack</span>
                                            <Icon name="external-link" className="w-3 h-3" />
                                        </a>
                                    </div>
                                </div>
                            </NestedAccordion>
                            
                            <NestedAccordion
                                title="ููุฏูุง ุจุงููุฌ (ุฅุนูุงูุงุช ููููุฉ)"
                                icon="dollar-sign"
                                isOpen={openNestedAccordion === "media"}
                                onToggle={() => handleNestedToggle("media")}
                            >
                                <div className="flex flex-col rounded-lg overflow-hidden border">
                                    <RecommendationLink 
                                        href="https://www.facebook.com/share/p/19uhZmBKuu/"
                                        icon="dollar-sign"
                                        title="ุงูุถู ุงูููุฑุณุงุช ุงููุชุงุญุฉ"
                                        description="ุจูุณุช ูุฌูุน ุฃูุถู ููุฑุณุงุช ุงูุฅุนูุงูุงุช ุงูููููุฉ"
                                    />
                                </div>
                            </NestedAccordion>

                            <NestedAccordion
                                title="Digital Marketing"
                                icon="briefcase"
                                isOpen={openNestedAccordion === "marketing"}
                                onToggle={() => handleNestedToggle("marketing")}
                            >
                                <div className="flex flex-col rounded-lg overflow-hidden border">
                                    <RecommendationLink 
                                        href="https://t.me/matrixmena/1000"
                                        icon="briefcase"
                                        title="Digital marketing workshop"
                                        description="ูุฑุดุฉ ุนูู ูู ุงูุชุณููู ุงูุฑููู"
                                    />
                                    <RecommendationLink 
                                        href="https://youtube.com/playlist?list=PLxe78bIBB8nVGSQbYw6MLKfWuNQmnjKdh&si=7s5NGI-gn7CVgqT-"
                                        icon="youtube"
                                        title="ููุฑุณ ุงูุชุณููู ุงูุงููุชุฑููู ุจูุณุงุนุฏุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู"
                                    />
                                </div>
                            </NestedAccordion>

                            <NestedAccordion
                                title="ูุชุนูู ุงูุฃุชูุชุฉ (Automation)"
                                icon="repeat"
                                isOpen={openNestedAccordion === "automation"}
                                onToggle={() => handleNestedToggle("automation")}
                            >
                                <div className="flex flex-col rounded-lg overflow-hidden border">
                                    <RecommendationLink 
                                        href="https://youtu.be/9bMy9C8wIyg?si=WuUN5xmThiWDfgvO"
                                        icon="play-circle"
                                        title="ููุฏูุฉ ุนู ุงูุฃุชูุชุฉ (ููุฏูู)"
                                    />
                                     <RecommendationLink 
                                        href="https://www.facebook.com/share/p/1B7G57H4KS/"
                                        icon="file-text"
                                        title="ุงูุฃุชูุชุฉ ูุฃููุงุนูุง ูุฎุงุฑุทุฉ ุงูุทุฑูู"
                                    />
                                     <RecommendationLink 
                                        href="https://www.facebook.com/share/p/17aTwCbtsA/"
                                        icon="map"
                                        title="ุฎุงุฑุทุฉ ุงูุทุฑูู ูุชุนูููุง"
                                    />
                                    <div className="p-3 bg-gray-50 border-t">
                                        <div className="flex items-center gap-3">
                                            <Icon name="list-checks" className="w-5 h-5 text-[--accent-green] flex-shrink-0" />
                                            <span className="flex-grow font-semibold">ุฃูุถู ูุตุงุฏุฑ ูุฌุงููุฉ ูุชุนูู n8n (ุจุฏูู ุจุฑูุฌุฉ):</span>
                                        </div>
                                    </div>
                                    <RecommendationLink 
                                        href="https://youtube.com/playlist?list=PLLHIYYlcgk6KN58UnPm8q1btNHLDJlYto&si=DFh8wDJR0dyBD1mT"
                                        icon="youtube"
                                        title="n8n with Karim (Playlist)"
                                    />
                                    <RecommendationLink 
                                        href="https://youtube.com/playlist?list=PLZ42ZUInDWC79Bw1K_tYQhUPfFRV7fy8v&si=YAq1RH85DUo7l-Ak"
                                        icon="youtube"
                                        title="ุงุญุชุฑู Agentic AI Engineering (Playlist)"
                                    />
                                </div>
                            </NestedAccordion>

                        </Accordion>

                         <Accordion 
                            title="ูุณุงุนุฏูู ุดุฎุตููู (GPTs)" 
                            isOpen={openAccordion === "assistants"} 
                            onToggle={() => handleToggle("assistants")}
                        >
                            <ul className="space-y-2 mt-4 text-gray-700">
                                <li>
                                    <a href="https://t.me/c/3692158422/9/29" target="_blank" rel="noopener noreferrer" className="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10 transition-colors w-full">
                                        <Icon name="play-circle" className="w-5 h-5 text-[--accent-green] flex-shrink-0" />
                                        <span className="flex-grow">ุงููุณุงุนุฏูู ุงูุดุฎุตููู (ุงููุญุงุถุฑุฉ)</span>
                                        <Icon name="external-link" className="w-5 h-5 text-gray-400" />
                                    </a>
                                </li>
                                <li>
                                    <a href="https://mahmoudtaru.github.io/Smarter-Gifts/" target="_blank" rel="noopener noreferrer" className="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10 transition-colors w-full">
                                        <Icon name="link" className="w-5 h-5 text-[--accent-green] flex-shrink-0" />
                                        <span className="flex-grow">ุงูุฑุงุจุท ุจุชุงุนูู (ูุงุฆูุฉ ุงููุณุงุนุฏูู)</span>
                                        <Icon name="external-link" className="w-5 h-5 text-gray-400" />
                                    </a>
                                </li>
                            </ul>
                        </Accordion>
                        
                         <Accordion 
                            title="ูุตุงุฏุฑ ุฅุถุงููุฉ ููุชุนูู" 
                            isOpen={openAccordion === "resources"} 
                            onToggle={() => handleToggle("resources")}
                        >
                            <NestedAccordion
                                title="ุฃูุถู ุตูุญุงุช ููุชุงุจุนุฉ ูุญุชูู AI"
                                icon="users"
                                isOpen={openNestedAccordion === "follow"}
                                onToggle={() => handleNestedToggle("follow")}
                            >
                                <div className="space-y-3 pt-2">
                                    <a href="https://drive.google.com/file/d/1qeKaJ8vr8gmBNCR-QLTmLgqXJPcKhFcs/view?usp=sharing" target="_blank" rel="noopener noreferrer" className="hover:text-[--accent-green] flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50">
                                            <Icon name="youtube" className="w-5 h-5 text-red-600" />
                                            <span>ููุชููุจ</span>
                                    </a>
                                    <a href="https://drive.google.com/file/d/1dtRwvwG4B3SqlFgEBxD1zLM8iRWlE8vX/view?usp=sharing" target="_blank" rel="noopener noreferrer" className="hover:text-[--accent-green] flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50">
                                            <Icon name="facebook" className="w-5 h-5 text-blue-600" />
                                            <span>ููุณุจูู</span>
                                    </a>
                                    <a href="https://drive.google.com/file/d/1lOOh_34fP9g8lsiYQtS8WGm1j59evVil/view?usp=sharing" target="_blank" rel="noopener noreferrer" className="hover:text-[--accent-green] flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50">
                                            <Icon name="twitter" className="w-5 h-5 text-blue-400" />
                                            <span>ุชููุชุฑ (X)</span>
                                    </a>
                                </div>
                            </NestedAccordion>
                            
                            <NestedAccordion
                                title="ุจูุฏูุงุณุช ุนู ุงูุฐูุงุก ุงูุงุตุทูุงุนู"
                                icon="podcast"
                                isOpen={openNestedAccordion === "podcast"}
                                onToggle={() => handleNestedToggle("podcast")}
                            >
                                <div className="flex flex-col rounded-lg overflow-hidden border">
                                    <RecommendationLink 
                                        href="https://youtu.be/7WvKcFsAj6E?si=R0CQAof252pcSUtx"
                                        icon="podcast"
                                        title="ุจูุฏูุงุณุช ูุญูุฏ ุฌูุฏุช ุนู ุญูููุฉ ุงูู AI"
                                        description="ุจุชูููู ุนู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุุ ุงูู ูู ุุ ุจุฏุฃ ุงุฒุงู ุุุงููู ูุตููุงูู ุุ ุฑุงูุญูู ูููู..."
                                    />
                                    <RecommendationLink 
                                        href="https://youtu.be/UsODl3Ay0CM?si=ZXGslETVO7EZ-YLP"
                                        icon="podcast"
                                        title="ุจูุฏูุงุณุช ุชุทูุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุงุบุชูุงู ุงููุฑุต"
                                    />
                                    <RecommendationLink 
                                        href="https://youtu.be/WjpPDYibONU?si=dN-7w9To4yaKKUxX"
                                        icon="podcast"
                                        title="ุฏูุฑ ุงูุนุฑุจ ูู ุทูุฑุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู"
                                    />
                                </div>
                            </NestedAccordion>

                        </Accordion>
                    </div>
                    
                    <div>
                        <h2 className="subsection-title text-2xl sm:text-3xl font-bold mb-6 text-center">ุจูู ุฃุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {toolsData.map((category, index) => (
                                <ToolCard 
                                    key={index} 
                                    category={category} 
                                    isOpen={openToolAccordion === category.title}
                                    onToggle={() => handleToolToggle(category.title)}
                                />
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // ShareTab Component
        const ShareTab = () => {
            return (
                <div className="space-y-6">
                    <Reminder>
                        ุฑุณุงูุฉ ุดูุฑ: ุฑุญูุชูุง ูุนูู ููุชุนุฉุ ูุจูู ููุจุฑ ููุชุทูุฑ. ุฑุฃูู ูุณุงูู ูู ุชุญุณูู ุงูููุฑุณุ ูุฏุนูุชู ูุฃุตุฏูุงุฆู ุชูุณูุน ูุฌุชูุนูุง. ูุฏููุง ุฃู ูุตุจุญ ุฌููุนูุง Smarter With AI.
                    </Reminder>
                    <div className="content-card p-8 rounded-lg shadow-md max-w-2xl mx-auto text-center">
                        <Icon name="gift" className="w-16 h-16 mx-auto text-[--accent-green]" />
                        <h2 className="page-title text-2xl sm:text-3xl font-bold text-center my-4">ุดุงุฑู ุงูููุฑุณ ูุน ุฃุญุจุงุจู!</h2>
                        <p className="text-gray-700 mb-2">ูุฃููุง ูุจุณูุทูู ุจูุฌูุฏู ูุนุงูุงุ ูุญุจ ูุดุงุฑูู ุงููุฑุตุฉ ุฏู ุนุดุงู ุฃุตุญุงุจู ูุญุจุงูุจู ููุถููุง ูููุง.</p>
                        <p className="text-gray-700 font-semibold mb-6">ุงุญุตู ุนูู ููุฏ ุฏุนูุฉ ุฎุงุต ุจูู ูุฏู ุฎุตู ูุตู ุฅูู 40% ูุฃู ุญุฏ ูู ุทุฑูู (ุชูุฏุฑ ุชุณุชุฎุฏูู ูุน 5 ุฃุดุฎุงุต).</p>
                        <p className="text-gray-700 mb-8">ุฎููู ุงูุช ูุญุจุงูุจู Smarter With AI! ๐</p>
                        <a href="https://www.facebook.com/messages/t/675407645657010" target="_blank" rel="noopener noreferrer" className="text-white bg-gradient-to-r from-[--accent-green] to-[--accent-navy] hover:opacity-90 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-lg w-full sm:w-auto px-8 py-3 text-center transition-transform transform hover:scale-105 inline-flex items-center justify-center gap-2">
                            <Icon name="message-circle" />
                            <span>ุงุทูุจ ููุฏ ุงูุฏุนูุฉ ุงูุฎุงุต ุจูู</span>
                        </a>
                    </div>
                    <div className="content-card p-8 rounded-lg shadow-md max-w-2xl mx-auto text-center">
                        <h2 className="page-title text-2xl sm:text-3xl font-bold text-center mb-6">ูุญู ููุชู ุจุฑุฃูู!</h2>
                        <p className="text-center text-gray-700 mb-8">ูุดุงุฑูุชู ุชุณุงุนุฏูุง ุนูู ุชุญุณูู ูุชุทููุฑ ุงูููุฑุณ. ุงุถุบุท ุนูู ุงูุฒุฑ ุฃุฏูุงู ูุชุฑู ุฑุฃูู.</p>
                        <a 
                            href="https://forms.gle/BFpPvB4yLQT8uQH66" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            className="text-white bg-gradient-to-r from-[--accent-green] to-[--accent-navy] hover:opacity-90 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-lg w-full sm:w-auto px-8 py-3 text-center transition-transform transform hover:scale-105 inline-flex items-center justify-center gap-2"
                        >
                            <Icon name="file-text" />
                            <span>ุดุงุฑููุง ุฑุฃูู ุงูุขู</span>
                        </a>
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [theme, setTheme] = useState('light');
            const [activeTab, setActiveTab] = useState('home');
            const [modalMessage, setModalMessage] = useState(null); 

            useEffect(() => {
                const storedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const initialTheme = storedTheme === 'dark' || (!storedTheme && prefersDark) ? 'dark' : 'light';
                setTheme(initialTheme);
            }, []);

            useEffect(() => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                localStorage.setItem('theme', theme);
            }, [theme]);
            
            useEffect(() => {
                if (window.lucide) {
                    const timeoutId = setTimeout(() => window.lucide.createIcons(), 0);
                    return () => clearTimeout(timeoutId);
                }
            }, [activeTab, modalMessage]);

            const handleThemeToggle = () => {
                setTheme(prevTheme => prevTheme === 'light' ? 'dark' : 'light');
            };

            const handleTabChange = useCallback((tabId) => {
                setActiveTab(tabId);
                window.scrollTo(0, 0);
            }, []);

            const renderContent = () => {
                switch (activeTab) {
                    case 'home': return <HomeTab />;
                    case 'lectures': return <LecturesTab setModalMessage={setModalMessage} />;
                    case 'tasks': return <TasksTab setModalMessage={setModalMessage} />;
                    case 'bonus': return <BonusTab />;
                    case 'share': return <ShareTab />;
                    default: return <HomeTab />;
                }
            };

            return (
                <div id="app-content">
                    {modalMessage && (
                        <div 
                            className="fixed inset-0 bg-black/60 flex items-center justify-center z-[999] p-4" 
                            onClick={() => setModalMessage(null)}
                        >
                            <div 
                                className="bg-white p-6 rounded-lg shadow-lg text-center w-full max-w-sm" 
                                onClick={(e) => e.stopPropagation()}
                            >
                                <Icon name="lock" className="w-16 h-16 text-[--accent-green] mx-auto mb-4" />
                                <h3 className="text-xl font-bold mb-2 text-gray-800">ูุญุชูู ูุบูู</h3>
                                <p className="text-gray-700 mb-6">{modalMessage}</p>
                                <button 
                                    onClick={() => setModalMessage(null)} 
                                    className="bg-gradient-to-r from-[--accent-green] to-[--accent-navy] text-white font-bold py-2 px-8 rounded-lg text-lg transition-all transform hover:scale-105"
                                >
                                    ุญุณููุง
                                </button>
                            </div>
                        </div>
                    )}

                    <Header theme={theme} onThemeToggle={handleThemeToggle} />
                    <main className="container mx-auto p-4 md:p-8 pb-24">
                        <div className="tab-content-anim">
                            {renderContent()}
                        </div>
                    </main>
                    <BottomNav activeTab={activeTab} onTabChange={handleTabChange} />
                </div>
            );
        };

        // Rendering
        const rootElement = document.getElementById('root');
        if (rootElement) {
            const root = ReactDOM.createRoot(rootElement);
            root.render(<App />);
        }
    </script>
    <script>
        // Welcome Screen Logic
        function setupWelcomeScreen() {
            const welcomeScreen = document.getElementById('welcome-screen');
            const appContent = document.getElementById('root');
            const startBtn = document.getElementById('start-btn');
            const titleEl = document.getElementById('welcome-title');
            const subtitleEl = document.getElementById('welcome-subtitle');
            
            const titleText = "Smarter With AI";
            const subtitleText = "ูุจุณูุทูู ุงูู ูู ุงูููุฑุณ ูุนุงูุง ๐";

            function applyTypewriter(element, text, speed, direction, callback) {
                let i = 0; element.innerHTML = "";
                
                element.classList.add('typewriter-anim', (direction === 'ltr' ? 'typewriter-ltr' : 'typewriter-rtl'));
                
                function type() {
                    if (i < text.length) { 
                        element.innerHTML += text.charAt(i); 
                        i++; 
                        setTimeout(type, speed); 
                    } else { 
                        setTimeout(() => {
                             element.classList.remove('typewriter-anim', 'typewriter-ltr', 'typewriter-rtl');
                             element.style.borderRight = 'none'; 
                             element.style.borderLeft = 'none';
                            if (callback) callback();
                        }, 500); 
                    }
                }
                type();
            }

            setTimeout(() => {
                applyTypewriter(titleEl, titleText, 100, 'ltr', () => {
                    setTimeout(() => {
                        applyTypewriter(subtitleEl, subtitleText, 75, 'rtl', () => {
                            setTimeout(() => {
                                startBtn.classList.remove('opacity-0');
                                startBtn.classList.add('animate-fadeInUp', 'pulse-animate');
                            }, 500);
                        });
                    }, 300);
                });
            }, 1500);

            startBtn.addEventListener('click', () => {
                welcomeScreen.classList.add('opacity-0');
                setTimeout(() => {
                    welcomeScreen.style.display = 'none';
                    if (appContent) {
                       appContent.classList.remove('hidden'); 
                    }
                    if (window.lucide) {
                        window.lucide.createIcons();
                    }
                }, 700);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            setupWelcomeScreen();
        });
    </script>
</body>
</html>
